{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/dvoge/NJIT-Projects/PP3/scrollshopper/sns/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/dvoge/NJIT-Projects/PP3/scrollshopper/sns/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/dvoge/NJIT-Projects/PP3/scrollshopper/sns/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useContext}from\"react\";import Button from\"react-bootstrap/esm/Button\";import Col from\"react-bootstrap/esm/Col\";import ListGroup from\"react-bootstrap/esm/ListGroup\";import Row from\"react-bootstrap/esm/Row\";import{Helmet}from\"react-helmet-async\";import{Link,useNavigate}from\"react-router-dom\";import MessageBox from\"../components/MessageBox\";import{Store}from\"../Store\";import Card from'react-bootstrap/Card';import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CartScreen(){var navigate=useNavigate();var _useContext=useContext(Store),state=_useContext.state,ctxDispatch=_useContext.dispatch;var cartItems=state.cart.cartItems;var updateCartHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(item,quantity){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/api/products/\".concat(item._id));case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;if(!(data.countInStock<quantity)){_context.next=7;break;}window.alert('Sorry. Product is out of stock');return _context.abrupt(\"return\");case 7:ctxDispatch({type:'CART_ADD_ITEM',payload:_objectSpread(_objectSpread({},item),{},{quantity:quantity})});case 8:case\"end\":return _context.stop();}}},_callee);}));return function updateCartHandler(_x,_x2){return _ref.apply(this,arguments);};}();var removeItemHandler=function removeItemHandler(item){ctxDispatch({type:'CART_REMOVE_ITEM',payload:item});};var checkoutHandler=function checkoutHandler(){navigate('/signin?redirect=/shipping');};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Shopping Cart\"})}),/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:8,children:[cartItems.length===0?/*#__PURE__*/_jsxs(MessageBox,{children:[\"Cart is Empty. \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Shopping\"})]}):/*#__PURE__*/_jsx(ListGroup,{children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsxs(Col,{md:4,children:[/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,className:\"img-fluid rounded img-thumbnail\"}),' ',/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.slug),children:item.name})]}),/*#__PURE__*/_jsxs(Col,{md:3,children:[/*#__PURE__*/_jsx(Button,{variant:\"light\",onClick:function onClick(){return updateCartHandler(item,item.quantity-1);},disable:item.quantity===1,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-minus-circle\"})}),' ',/*#__PURE__*/_jsx(\"span\",{children:item.quantity}),' ',/*#__PURE__*/_jsx(Button,{variant:\"light\",onClick:function onClick(){return updateCartHandler(item,item.quantity+1);},disable:item.quantity===item.countInStock,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus-circle\"})})]}),/*#__PURE__*/_jsxs(Col,{md:3,children:[\"$\",item.price]}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return removeItemHandler(item);},variant:\"light\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})},item._id);})}),\";\"]}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(ListGroup.Item,{variant:\"flush\",children:/*#__PURE__*/_jsxs(\"h3\",{children:[\"Subtotal (\",cartItems.reduce(function(a,c){return a+c.quantity;},0),' ',\"items) : $\",cartItems.reduce(function(a,c){return a+c.price*c.quantity;},0)]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"primary\",onClick:checkoutHandler,disable:cartItems.length===0,children:\"Proceed to Checkout\"})})})]})})})]})]});}","map":{"version":3,"names":["useContext","Button","Col","ListGroup","Row","Helmet","Link","useNavigate","MessageBox","Store","Card","axios","CartScreen","navigate","state","ctxDispatch","dispatch","cartItems","cart","updateCartHandler","item","quantity","get","_id","data","countInStock","window","alert","type","payload","removeItemHandler","checkoutHandler","length","map","image","name","slug","price","reduce","a","c"],"sources":["C:/Users/dvoge/NJIT-Projects/PP3/scrollshopper/sns/frontend/src/screens/Cart.js"],"sourcesContent":["import { useContext } from \"react\";\r\nimport Button from \"react-bootstrap/esm/Button\";\r\nimport Col from \"react-bootstrap/esm/Col\";\r\nimport ListGroup from \"react-bootstrap/esm/ListGroup\";\r\nimport Row from \"react-bootstrap/esm/Row\";\r\nimport { Helmet } from \"react-helmet-async\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport MessageBox from \"../components/MessageBox\";\r\nimport { Store } from \"../Store\";\r\nimport Card from 'react-bootstrap/Card';\r\nimport axios from \"axios\";\r\n\r\nexport default function CartScreen() {\r\n    const navigate = useNavigate();\r\n    const { state, dispatch: ctxDispatch } = useContext(Store);\r\n    const {\r\n        cart: { cartItems },\r\n    } = state;\r\n\r\nconst updateCartHandler = async (item, quantity) => {\r\n    const { data } =  await axios.get(`/api/products/${item._id}`);\r\n    if (data.countInStock < quantity) {\r\n        window.alert('Sorry. Product is out of stock');\r\n        return;\r\n    }\r\n    ctxDispatch({\r\n        type: 'CART_ADD_ITEM',\r\n        payload: { ...item, quantity },\r\n    });\r\n};\r\n\r\nconst removeItemHandler = (item) => {\r\n    ctxDispatch({ type: 'CART_REMOVE_ITEM', payload: item });\r\n}\r\n\r\nconst checkoutHandler= () => {\r\n    navigate('/signin?redirect=/shipping');\r\n}\r\n    return (\r\n        <div>\r\n            <Helmet>\r\n                <title>Shopping Cart</title>\r\n            </Helmet>\r\n            <h1>Shopping Cart</h1>\r\n            <Row>\r\n                <Col md={8}>\r\n                    {cartItems.length === 0 ? (\r\n                        <MessageBox>\r\n                            Cart is Empty. <Link to='/'>Go Shopping</Link>\r\n                        </MessageBox>\r\n                    ) :\r\n                        (\r\n                            <ListGroup>\r\n                                {cartItems.map((item) => (\r\n                                    <ListGroup.Item key={item._id}>\r\n                                        <Row className=\"align-items-center\">\r\n                                            <Col md={4}>\r\n                                                <img\r\n                                                    src={item.image}\r\n                                                    alt={item.name}\r\n                                                    className=\"img-fluid rounded img-thumbnail\"\r\n                                                ></img>{' '}\r\n                                                <Link to={`/product/${item.slug}`}>{item.name}</Link>\r\n                                            </Col>\r\n                                            <Col md={3}>\r\n                                                <Button\r\n                                                    variant=\"light\"\r\n                                                    onClick={() => updateCartHandler(item, item.quantity - 1)}\r\n                                                    disable={item.quantity === 1}>\r\n                                                    <i className=\"fas fa-minus-circle\"></i>\r\n                                                </Button>{' '}\r\n                                                <span>{item.quantity}</span>{' '}\r\n                                                <Button\r\n                                                    variant=\"light\"\r\n                                                    onClick={() => updateCartHandler(item, item.quantity + 1)}\r\n                                                    disable={item.quantity === item.countInStock}>\r\n                                                    <i className=\"fas fa-plus-circle\"></i>\r\n                                                </Button>\r\n                                            </Col>\r\n                                            <Col md={3}>${item.price}</Col>\r\n                                            <Button \r\n                                            onClick={() => removeItemHandler(item)}\r\n                                            variant=\"light\">\r\n                                                <i className=\"fas fa-trash\"></i>\r\n                                            </Button>\r\n                                        </Row>\r\n                                    </ListGroup.Item>\r\n\r\n                                ))}\r\n                            </ListGroup>\r\n                        )\r\n                    };\r\n                </Col>\r\n                <Col md={4}>\r\n                    <Card>\r\n                        <Card.Body>\r\n                            <ListGroup.Item variant=\"flush\">\r\n                                <h3>\r\n                                    Subtotal ({cartItems.reduce((a, c) => a + c.quantity, 0)}{' '}\r\n                                    items) : $\r\n                                    {cartItems.reduce((a, c) => a + c.price * c.quantity, 0)}\r\n                                </h3>\r\n                            </ListGroup.Item>\r\n                            <ListGroup.Item>\r\n                                <div className=\"d-grid\">\r\n                                    <Button\r\n                                        type=\"button\"\r\n                                        variant=\"primary\"\r\n                                        onClick={checkoutHandler}\r\n                                        disable={cartItems.length === 0}>\r\n                                        Proceed to Checkout\r\n                                    </Button>\r\n                                </div>\r\n                            </ListGroup.Item>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n        </div>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}